<nav class="site-nav">
  <div class="nav-container">
    <div class="nav-header">
      <a href="{{ '/' | relative_url }}" class="site-title">‚ö° 8-Bit Processor</a>
      
      <div class="nav-controls">
        <!-- Language Switcher -->
        <button id="lang-toggle" class="lang-btn" aria-label="Switch language">
          <span id="current-lang">üá™üá∏</span>
        </button>
        
        <!-- Hamburger Menu Button -->
        <button id="menu-toggle" class="menu-btn" aria-label="Toggle menu">
          <span class="hamburger-icon">
            <span></span>
            <span></span>
            <span></span>
          </span>
        </button>
      </div>
    </div>
    
    <div class="nav-sections" id="nav-menu">
      <!-- Espa√±ol Content -->
      <div class="nav-content lang-es active">
        <div class="nav-section">
          <h3 class="section-toggle">üìö Documentaci√≥n <span class="toggle-icon">‚ñº</span></h3>
          <ul class="section-content">
            <li><a href="{{ '/' | relative_url }}">Inicio</a></li>
            <li><a href="{{ '/LEEME.html' | relative_url }}">Documentaci√≥n Principal</a></li>
            <li><a href="{{ '/Estructura.html' | relative_url }}">Estructura del Proyecto</a></li>
          </ul>
        </div>
        
        <div class="nav-section">
          <h3 class="section-toggle">üìñ Bit√°coras <span class="toggle-icon">‚ñº</span></h3>
          <ul class="section-content">
            <li><a href="{{ '/src/core/bit/bitacora1.1.1-es.html' | relative_url }}">Bit</a></li>
            <li><a href="{{ '/src/core/logicGates/bitacora1.1.2-es.html' | relative_url }}">Compuertas B√°sicas</a></li>
            <li><a href="{{ '/src/core/derivedGates/bitacora1.1.3-es.html' | relative_url }}">Compuertas Derivadas</a></li>
          </ul>
        </div>
        
        <div class="nav-section">
          <h3 class="section-toggle">üîó Enlaces <span class="toggle-icon">‚ñº</span></h3>
          <ul class="section-content">
            <li><a href="{{ '/CHANGELOG-ES.html' | relative_url }}">Registro de Cambios</a></li>
            <li><a href="{{ '/CONTRIBUTING.html' | relative_url }}">Contribuir</a></li>
            <li><a href="https://github.com/Caertos/8-BitsProcessor" target="_blank">üìÅ Repositorio</a></li>
          </ul>
        </div>
      </div>
      
      <!-- English Content -->
      <div class="nav-content lang-en">
        <div class="nav-section">
          <h3 class="section-toggle">üìö Documentation <span class="toggle-icon">‚ñº</span></h3>
          <ul class="section-content">
            <li><a href="{{ '/' | relative_url }}">Home</a></li>
            <li><a href="{{ '/README-EN.html' | relative_url }}">Main Documentation</a></li>
            <li><a href="{{ '/Structure.html' | relative_url }}">Project Structure</a></li>
          </ul>
        </div>
        
        <div class="nav-section">
          <h3 class="section-toggle">üìñ Development Logs <span class="toggle-icon">‚ñº</span></h3>
          <ul class="section-content">
            <li><a href="{{ '/src/core/bit/bitacora1.1.1-en.html' | relative_url }}">Bit</a></li>
            <li><a href="{{ '/src/core/logicGates/bitacora1.1.2-en.html' | relative_url }}">Basic Gates</a></li>
            <li><a href="{{ '/src/core/derivedGates/bitacora1.1.3-en.html' | relative_url }}">Derived Gates</a></li>
          </ul>
        </div>
        
        <div class="nav-section">
          <h3 class="section-toggle">üîó Links <span class="toggle-icon">‚ñº</span></h3>
          <ul class="section-content">
            <li><a href="{{ '/CHANGELOG-EN.html' | relative_url }}">Changelog</a></li>
            <li><a href="{{ '/CONTRIBUTING.html' | relative_url }}">Contributing</a></li>
            <li><a href="https://github.com/Caertos/8-BitsProcessor" target="_blank">üìÅ Repository</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

<script>
  // Navigation functionality
  (function() {
    const langToggle = document.getElementById('lang-toggle');
    const menuToggle = document.getElementById('menu-toggle');
    const currentLangSpan = document.getElementById('current-lang');
    const navMenu = document.getElementById('nav-menu');
    const esContent = document.querySelector('.lang-es');
    const enContent = document.querySelector('.lang-en');
    
    // Get saved language or default to Spanish
    let currentLang = localStorage.getItem('site-language') || 'es';
    
    // Apply saved language on load
    updateLanguage(currentLang);
    
    // Language switcher
    langToggle.addEventListener('click', function() {
      currentLang = currentLang === 'es' ? 'en' : 'es';
      updateLanguage(currentLang);
      localStorage.setItem('site-language', currentLang);
    });
    
    function updateLanguage(lang) {
      if (lang === 'es') {
        currentLangSpan.textContent = 'üá™üá∏';
        esContent.classList.add('active');
        enContent.classList.remove('active');
      } else {
        currentLangSpan.textContent = 'üá∫üá∏';
        enContent.classList.add('active');
        esContent.classList.remove('active');
      }
    }
    
    // Hamburger menu toggle
    menuToggle.addEventListener('click', function() {
      navMenu.classList.toggle('nav-open');
      menuToggle.classList.toggle('active');
    });
    
    // Section toggles
    const sectionToggles = document.querySelectorAll('.section-toggle');
    sectionToggles.forEach(function(toggle) {
      toggle.addEventListener('click', function() {
        const section = this.parentElement;
        const content = section.querySelector('.section-content');
        const icon = this.querySelector('.toggle-icon');
        
        section.classList.toggle('collapsed');
        
        if (section.classList.contains('collapsed')) {
          content.style.maxHeight = '0';
          icon.textContent = '‚ñ∂';
        } else {
          content.style.maxHeight = content.scrollHeight + 'px';
          icon.textContent = '‚ñº';
        }
      });
    });
    
    // Initialize all sections as expanded
    document.querySelectorAll('.section-content').forEach(function(content) {
      content.style.maxHeight = content.scrollHeight + 'px';
    });
    
    // Close menu when clicking on a link
    const navLinks = document.querySelectorAll('.nav-sections a');
    navLinks.forEach(function(link) {
      link.addEventListener('click', function() {
        navMenu.classList.remove('nav-open');
        menuToggle.classList.remove('active');
      });
    });
    
    // Close menu when clicking outside
    document.addEventListener('click', function(event) {
      if (!event.target.closest('.site-nav')) {
        navMenu.classList.remove('nav-open');
        menuToggle.classList.remove('active');
      }
    });
  })();
</script>